(this["webpackJsonpfull-stack-open-course"]=this["webpackJsonpfull-stack-open-course"]||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),c=n(16),a=n.n(c),o=n(3),u=n(4),i=n.n(u),l="https://pacific-waters-29573.herokuapp.com/api/persons",j={getAll:function(){return i.a.get(l).then((function(e){return e.data}))},create:function(e){return i.a.post(l,e).then((function(e){return e.data}))},deleteObject:function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return console.log(e.data)}))},update:function(e,t){return i.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))}},b=n(0),m=function(e){var t=e.persons,n=e.setPersons,s=e.setErrorMessage,r=e.setSuccessMessage;return t.map((function(e){return Object(b.jsxs)("p",{children:[e.name," ",e.number," ",Object(b.jsx)("button",{onClick:function(){!0===window.confirm("Delete ".concat(e.name,"?"))&&j.deleteObject(e.id).then((function(c){n(t.filter((function(t){return t.id!==e.id}))),s(""),r("")})).catch((function(e){s("Person has been removed from server"),r("")}))},children:"Delete"})]},e.name)}))},d=function(e){return console.log(e),Object(b.jsxs)("p",{children:[e.person.name," ",e.person.number]})},f=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{children:["filter shown with ",Object(b.jsx)("input",{value:e.filterName,onChange:function(t){console.log(t.target.value),e.setFilterName(t.target.value)}})]}),Object(b.jsx)(d,{person:function(){var t=e.persons.find((function(t){return e.filterName.toLowerCase()===t.name.toLowerCase()}));return null!=t?t:{name:"",number:""}}()})]})},h=function(e){var t=e.message;return""===t?null:Object(b.jsx)("div",{className:"errorMessage",children:t})},g=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{message:e.errorMessage}),Object(b.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),""===e.newName)e.setErrorMessage("Please enter name"),e.setSuccessMessage("");else if(""===e.newNumber)e.setErrorMessage("Please enter number"),e.setSuccessMessage("");else{e.setErrorMessage("");var n={name:e.newName,number:e.newNumber},s=e.persons.find((function(e){return e.name===n.name}));console.log(s),s?!0===window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))&&j.update(s.id,n).then((function(t){e.setPersons(e.persons.map((function(e){return e.id!==t.id?e:t}))),e.setSuccessMessage("Number replaced Successfully")})).catch((function(t){e.setErrorMessage("Number has been removed from server"),e.setSuccessMessage("")})):(j.create(n).then((function(t){return e.setPersons(e.persons.concat(t))})),e.setSuccessMessage("Person added successfully")),e.setNewName(""),e.setNewNumber("")}},children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["name: ",Object(b.jsx)("input",{value:e.newName,onChange:function(t){console.log(t.target.value),e.setNewName(t.target.value)}})]}),Object(b.jsxs)("p",{children:["number: ",Object(b.jsx)("input",{value:e.newNumber,onChange:function(t){console.log(t.target.value),e.setNewNumber(t.target.value)}})]})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})]})},O=function(e){var t=e.message;return""===t?null:Object(b.jsx)("div",{className:"successMessage",children:t})},p=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(""),a=Object(o.a)(c,2),u=a[0],i=a[1],l=Object(s.useState)(""),d=Object(o.a)(l,2),h=d[0],p=d[1],N=Object(s.useState)(""),x=Object(o.a)(N,2),w=x[0],v=x[1],M=Object(s.useState)(""),S=Object(o.a)(M,2),P=S[0],E=S[1],k=Object(s.useState)(""),C=Object(o.a)(k,2),y=C[0],F=C[1];return Object(s.useEffect)((function(){j.getAll().then((function(e){return r(e)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(O,{message:y}),Object(b.jsx)(f,{persons:n,filterName:w,setFilterName:v}),Object(b.jsx)("h3",{children:"Add a new"}),Object(b.jsx)(g,{persons:n,setPersons:r,newName:u,setNewName:i,newNumber:h,setNewNumber:p,errorMessage:P,setErrorMessage:E,setSuccessMessage:F,successMessage:y}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(m,{persons:n,setPersons:r,setErrorMessage:E,setSuccessMessage:F})]})};n(40);a.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.63fa3eec.chunk.js.map